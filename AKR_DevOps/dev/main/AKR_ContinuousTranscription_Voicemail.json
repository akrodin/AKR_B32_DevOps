{"header":{"masterId":254057588,"scriptName":"AKR_DevOps\\dev\\main\\AKR_ContinuousTranscription_Voicemail","busNo":4597359,"mediaType":4,"mediaTypeName":"call","purposeType":"General","variableRedaction":"","libraryId":"1610EA95-BA35-41E6-8282-EDD315ED2CB3","lockInfo":{"lockedName":"","lockedId":"","lockedDate":""},"nextActionId":25,"status":"Active","lastSavedIn":"cxs"},"actions":{"1":{"actionId":1,"libraryId":"B2F794C5-0232-40E7-9830-76D573BF57D7","name":"BEGIN","version":1,"label":"Begin","dependencyOrder":"0","implType":"0","x":112,"y":272},"2":{"actionId":2,"libraryId":"B333DA63-33C8-4297-A58A-E9546CF7F0F2","name":"SNIPPET","version":1,"label":"Set up Parameters","dependencyOrder":"1","implType":"0","x":280,"y":256},"3":{"actionId":3,"libraryId":"8E121149-83EF-40E0-8FFE-341DB5302671","name":"TTSVOICE","version":1,"label":"en-US-Wavenet-C","dependencyOrder":"2","implType":"0","x":536,"y":256},"4":{"actionId":4,"libraryId":"7FEB7FE4-F998-4B47-ABA2-172AC9F8FC59","name":"CONTINUOUS_TRANSCRIPTION_LIBID_7feb7fe4-f998-4b47-aba2-172ac9f8fc59","version":1,"label":"Start Continuous Transcription","dependencyOrder":"3","implType":"1","x":800,"y":280},"7":{"actionId":7,"libraryId":"7FEB7FE4-F998-4B47-ABA2-172AC9F8FC59","name":"CONTINUOUS_TRANSCRIPTION_LIBID_7feb7fe4-f998-4b47-aba2-172ac9f8fc59","version":1,"label":"Stop Continuous Transcription","dependencyOrder":"4","implType":"1","x":1840,"y":280},"8":{"actionId":8,"libraryId":"5BF67B1C-9736-434D-9B6F-0D856AEA8F16","name":"WAIT","version":1,"label":"Wait 3","dependencyOrder":"5","implType":"0","x":2040,"y":280},"9":{"actionId":9,"libraryId":"9FE691EB-D1A1-4D6C-8C4C-D8A47AEC6A25","name":"GetBotTranscript_LIBID_9fe691eb-d1a1-4d6c-8c4c-d8a47aec6a25","version":1,"label":"Get Bot Transcript","dependencyOrder":"6","implType":"1","x":2240,"y":280},"10":{"actionId":10,"libraryId":"B333DA63-33C8-4297-A58A-E9546CF7F0F2","name":"SNIPPET","version":1,"label":"Parse out Transcript","dependencyOrder":"7","implType":"0","x":2440,"y":256},"11":{"actionId":11,"libraryId":"B1B9A2DD-65B6-4626-9CF5-9CFA69CF59E2","name":"PLAY","version":1,"label":"Play Message","dependencyOrder":"8","implType":"0","x":2648,"y":256},"14":{"actionId":14,"libraryId":"B1B9A2DD-65B6-4626-9CF5-9CFA69CF59E2","name":"PLAY","version":1,"label":"Play Announcement","dependencyOrder":"9","implType":"0","x":1048,"y":256},"15":{"actionId":15,"libraryId":"17E90CCE-5E63-48A3-9A00-2FCB44FC53A6","name":"RECORD","version":1,"label":"Record VM","dependencyOrder":"10","implType":"0","x":1288,"y":280},"16":{"actionId":16,"libraryId":"DAEE9C00-12CE-4222-A42E-307C37D53B7F","name":"MENU","version":1,"label":"Menu","dependencyOrder":"11","implType":"0","x":1536,"y":256},"18":{"actionId":18,"libraryId":"B1B9A2DD-65B6-4626-9CF5-9CFA69CF59E2","name":"PLAY","version":1,"label":"Play Recording","dependencyOrder":"12","implType":"0","x":1536,"y":32},"19":{"actionId":19,"libraryId":"B1B9A2DD-65B6-4626-9CF5-9CFA69CF59E2","name":"PLAY","version":1,"label":"Rerecord Message","dependencyOrder":"13","implType":"0","x":1536,"y":496},"23":{"actionId":23,"libraryId":"933F7543-0CD4-4BB3-A403-FBFE14F4D34C","name":"EMAIL","version":1,"label":"Email Transcription and Audio file","dependencyOrder":"14","implType":"0","x":2848,"y":280},"24":{"actionId":24,"libraryId":"B64A6796-4F66-4B1B-A9B5-3AF926AB4B7C","name":"HANGUP","version":1,"label":"Hangup","dependencyOrder":"15","implType":"0","x":3040,"y":280}},"properties":{"1":{"0":{"name":"RootFolder","value":""},"1":{"name":"Application","value":""},"2":{"name":"ParamCount","value":""},"3":{"name":"Parameters","value":[]}},"2":{"0":{"name":"Data","value":"DYNAMIC scriptParams\r\nASSIGN scriptParams.transcriptEntryType = \"voicemail\"\r\nASSIGN scriptParamsJSON = \"{scriptParams.asJson()}\"\r\n\r\nDYNAMIC trasncriptvariable\r\n\r\n//Define the announcement to be played for leaving a voicemail\r\nASSIGN myAnnouncement=\"Thank you for calling.  Please leave us a message and we'll call you back.\"\r\nASSIGN myMenuOptions=\"To rerecord your  message, please press 1; To play your recorded message, press 2; To hangup, please press 3.\"\r\nASSIGN myRerecord=\"Please rerecord your message.\"\r\nASSIGN RecordingName=\"Message_{ContactID}.wav\"\r\nASSIGN fullPath=\"AllonRodin\\\"\r\nASSIGN myFileName=fullPath.replace(\"{char(92)}\",\"%5C\")\r\nASSIGN SenderName=\"Allon Rodin\"\r\nASSIGN EmailSender=\"allon.rodin@nice.com\"\r\nASSIGN EmailReceiver=\"allon.rodin@nice.com\"\r\nASSIGN EmailSubject=\"RE: Voicemail and transcript for Message_{ContactID}\"\r\nASSIGN AudioRecording=\"{fullPath}{RecordingName}\"\r\n\r\n"},"1":{"name":"MaxStringSize","value":"Limit2K"}},"3":{"0":{"name":"baseapiurl","value":""},"1":{"name":"vendor","value":"Google"},"2":{"name":"voicename","value":"en-US-Wavenet-C"},"3":{"name":"BotExchangeVersion","value":""}},"4":{"0":{"name":"transcriptionProfileName","value":"SCV_Transcription"},"1":{"name":"enabled","value":"True"},"2":{"name":"participants","value":"Patron"},"3":{"name":"generateUtteranceEvents","value":"False"},"4":{"name":"scriptParamsJson","value":"{scriptParamsJSON}"}},"7":{"0":{"name":"transcriptionProfileName","value":"SCV_Transcription"},"1":{"name":"enabled","value":"False"},"2":{"name":"participants","value":"Patron"},"3":{"name":"generateUtteranceEvents","value":"False"},"4":{"name":"scriptParamsJson","value":"{scriptParamsJSON}"}},"8":{"0":{"name":"Seconds","value":"3"}},"9":{"0":{"name":"format","value":"json"},"1":{"name":"transcriptVarName","value":"myTranscript"},"2":{"name":"actionRestUrl","value":""},"3":{"name":"timeoutMS","value":""}},"10":{"0":{"name":"Data","value":"ASSIGN myVoicemailTranscript = mytranscript.messages.transcripts[1].messageBody\r\n"},"1":{"name":"MaxStringSize","value":"Limit2K"}},"11":{"0":{"name":"Sequence","value":"\"%Thank you.  Goodbye.\""},"1":{"name":"Phrase","value":"Thank you.  Goodbye."},"2":{"name":"ClearDigits","value":"True"},"3":{"name":"DetectDTMF","value":"True"},"4":{"name":"SuppressSilence","value":""},"5":{"name":"TTSVolume","value":""},"6":{"name":"TTSRate","value":""},"7":{"name":"TTSVoice","value":""}},"14":{"0":{"name":"Sequence","value":"\"%{myAnnouncement}\""},"1":{"name":"Phrase","value":"{myAnnouncement}"},"2":{"name":"ClearDigits","value":"True"},"3":{"name":"DetectDTMF","value":"True"},"4":{"name":"SuppressSilence","value":""},"5":{"name":"TTSVolume","value":""},"6":{"name":"TTSRate","value":""},"7":{"name":"TTSVoice","value":""}},"15":{"0":{"name":"FileName","value":"{RecordingName}"},"1":{"name":"reserved1073742958","value":""},"2":{"name":"RecordTimeout","value":"120"},"3":{"name":"RecordBeep","value":"True"},"4":{"name":"TermDigits","value":"@"},"5":{"name":"AutoClearDigits","value":"True"},"6":{"name":"MaxSilence","value":"3"},"7":{"name":"SuppressSilence","value":"False"},"8":{"name":"reserved1073742965","value":""},"9":{"name":"NoVoiceTimeout","value":"2"},"10":{"name":"reserved1073742967","value":""},"11":{"name":"reserved1073742968","value":""},"12":{"name":"reserved1073742969","value":""},"13":{"name":"reserved1073742970","value":""}},"16":{"0":{"name":"Sequence","value":"\"%{myMenuOptions}\""},"1":{"name":"Phrase","value":"{myMenuOptions}"},"2":{"name":"ClearDigits","value":"True"},"3":{"name":"MaxDigits","value":"1"},"4":{"name":"Terminator","value":"#-"},"5":{"name":"Timeout","value":"5"},"6":{"name":"InterDigitTimeout","value":"5"},"7":{"name":"Variable","value":"MRES"}},"18":{"0":{"name":"Sequence","value":"\"{RecordingName}\""},"1":{"name":"Phrase","value":""},"2":{"name":"ClearDigits","value":"True"},"3":{"name":"DetectDTMF","value":"True"},"4":{"name":"SuppressSilence","value":""},"5":{"name":"TTSVolume","value":""},"6":{"name":"TTSRate","value":""},"7":{"name":"TTSVoice","value":""}},"19":{"0":{"name":"Sequence","value":"\"%{myRerecord}\""},"1":{"name":"Phrase","value":"{myRerecord}"},"2":{"name":"ClearDigits","value":"True"},"3":{"name":"DetectDTMF","value":"True"},"4":{"name":"SuppressSilence","value":""},"5":{"name":"TTSVolume","value":""},"6":{"name":"TTSRate","value":""},"7":{"name":"TTSVoice","value":""}},"23":{"0":{"name":"MailServer","value":"Automatic"},"1":{"name":"SenderName","value":"{SenderName}"},"2":{"name":"SenderAddress","value":"{EmailSender}"},"3":{"name":"reserved1073743171","value":""},"4":{"name":"Recipient","value":"{EmailReceiver}"},"5":{"name":"CCRecipient","value":""},"6":{"name":"Subject","value":"{EmailSubject}"},"7":{"name":"Body","value":"{myVoicemailTranscript}"},"8":{"name":"HTML","value":""},"9":{"name":"Attachments","value":"{AudioRecording}"},"10":{"name":"ErrorMsgVar","value":"ERRMSG"}},"24":{}},"branches":{"1":[{"to":2,"label":"","type":"default","index":0,"ports":"r,l","lineType":"","elbows":[]}],"2":[{"to":3,"label":"","type":"default","index":0,"ports":"r,l","lineType":"","elbows":[]}],"3":[{"to":4,"label":"","type":"default","index":0,"ports":"r,l","lineType":"","elbows":[]}],"4":[{"to":14,"label":"","type":"default","index":0,"ports":"r,l","lineType":"","elbows":[]}],"7":[{"to":8,"label":"","type":"default","index":0,"ports":"r,l","lineType":"","elbows":[]}],"8":[{"to":9,"label":"","type":"default","index":0,"ports":"r,l","lineType":"","elbows":[]}],"9":[{"to":10,"label":"","type":"default","index":0,"ports":"r,l","lineType":"","elbows":[]}],"10":[{"to":11,"label":"","type":"default","index":0,"ports":"r,l","lineType":"","elbows":[]}],"11":[{"to":23,"label":"","type":"default","index":0,"ports":"r,l","lineType":"","elbows":[]}],"14":[{"to":15,"label":"","type":"default","index":0,"ports":"r,l","lineType":"","elbows":[]}],"15":[{"to":16,"label":"","type":"default","index":0,"ports":"r,l","lineType":"","elbows":[]}],"16":[{"to":19,"label":"1","type":"custom","index":0,"ports":"b,t","lineType":"","elbows":[]},{"to":18,"label":"2","type":"custom","index":0,"ports":"r,r","lineType":"","elbows":[]},{"to":7,"label":"3","type":"custom","index":0,"ports":"r,l","lineType":"","elbows":[]}],"18":[{"to":16,"label":"","type":"default","index":0,"ports":"b,t","lineType":"","elbows":[]}],"19":[{"to":15,"label":"","type":"default","index":0,"ports":"l,b","lineType":"","elbows":[]}],"23":[{"to":24,"label":"","type":"default","index":0,"ports":"r,l","lineType":"","elbows":[]}]}}